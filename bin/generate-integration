#!/usr/bin/env php
<?php


chdir(dirname(__DIR__));

// Decline static file requests back to the PHP built-in webserver
if (php_sapi_name() === 'cli-server') {
    $path = realpath(__DIR__ . parse_url($_SERVER['REQUEST_URI'***REMOVED***, PHP_URL_PATH));
    if (__FILE__ !== $path && is_file($path)) {
        return false;
    }
    unset($path);
}

require 'init_autoloader.php';

use Gear\Integration\Util;
use Gear\Integration\Component;

$string = new GearBase\Util\String\StringService();
$arrayService = new Gear\Util\Vector\ArrayService();

$resolveNames = new Util\ResolveNames\ResolveNames($string);
$columnUtil   = new Util\Columns\Columns();
$location     = new Util\Location\Location();
$persist      = new Util\Persist\Persist($location);

    
$migration = new Component\MigrationFile\MigrationFile(
    $persist,
    $string,
    $arrayService    
);

$gearfile = new Component\GearFile\GearFile(
    $persist,
    $string
);
    
$testFile = new Component\TestFile\TestFile($persist, $string);
        
$superTestFile = Component\SuperTestFile\SuperTestFile($persist, $string);

            
        
/*
$generator = Gear\Integration\Generator();

$generator->generateSrc();
$generator->generateSrcMvc();
$generator->generateController();
$generator->generateControllerMvc();
$generator->generateMvc();
*/

/*
# Gear\Integration\Generator\GeneratorInterface;

# Gear\Integration\Generator\Generator
# Gear\Integration\Generator\SrcGenerator\SrcGenerator;
-- dependency
-- implements
-- gearfile
# Gear\Integration\Generator\SrcMvcGenerator\SrcMvcGenerator;
# Gear\Integration\Generator\ControllerGenerator\ControllerGenerator;
-- dependency
-- implements
-- gearfile
# Gear\Integration\Generator\ControllerMvcGenerator\ControllerMvcGenerator;
# Gear\Integration\Generator\MvcGenerator\MvcGenerator;

# Gear\Integration\MvcTest
    - columns
    - super type
    - constraints
    - user type
    - tables
    - count
#    + getNames
# Gear\Integration\SrcTest
    - type
    - count
# Gear\Integration\ControllerTest
    - type
    - count
# Gear\Integration\SrcMvcTest
    - extends MvcTest
    - type
# Gear\Integration\ControllerMvcTest
    - extends MvcTest
    - const type
# Gear\Integration\Util\ResolveNames
# Gear\Integration\Util\ResolveColumns
# Gear\Integration\Util\ResolveImplements
# Gear\Integration\Util\ResolveDependency

# Gear\Integration\Output\Migration
# Gear\Integration\Output\Gearfile
# Gear\Integration\Util\GearfileGenerator
# Gear\Integration\Util\MigrationGenerator
*/