#!/bin/bash

module=${1}
moduleUrl=$(sed -e 's/\([A-Z***REMOVED***\)/-\L\1/g' -e 's/^-//' -e 's/\\//g'  <<< "${1}")
base=${2}
type=${3}
gearfile=${4}


ls -l $base/$moduleUrl &> /dev/null

#if [ "$?" == "0" ***REMOVED***; then
#    echo "Module exist"
#    exit
#fi

#sudo php public/index.php gear module-as-project create $module $base --type=$type 

cd $base/$moduleUrl

#sudo script/deploy-development.sh

if [ "$gearfile" != "" ***REMOVED***; then
    cp $gearfile $base/$moduleUrl 
    cd $base/gear
    sudo php public/index.php gear module construct $module $base --file=$gearfile
fi

#sudo ant dev